{% extends 'base.html' %}
{% load static %}

{% block title %}
{{view_profile.user.full_name}}'s Followers
{% endblock title %}


{% block css %}
  <link rel="stylesheet" type="text/css" href={% static 'pvc/style.css' %}>
  <link rel="stylesheet" type="text/css" href={% static 'profiles/style.css' %}>
{% endblock css %}

{% block header %}
    {% include "main/navbar.html" %}     
{% endblock header %}

{% block content %}
<div class="ui container-fluid"> 
  <div class="ui grid">
    <div class="ui row">
      <div class="three wide column" >
        {% include 'profiles/sidepanel.html' %}
      </div>

      {% if is_empty %}
        No Followers to interact with
      {% endif %}
      
      <!-- People to show -->
      <div class="thirteen wide column">
        
        <div id='profile_bannar'>
          {% comment %} <center class='top_ad_container'>
            <script type="text/javascript">
              atOptions = {
              'key' : 'a7c13fc1ce7928500af33f274437ed67',
              'format' : 'iframe',
              'height' : 50,
              'width' : 320,
              'params' : {}
              };
              document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://sluicebigheartedpeevish.com/a7c13fc1ce7928500af33f274437ed67/invoke.js"></scr' + 'ipt>');
          </script>
          </center> {% endcomment %}
        </div>
        
        <center><h1 id='recommendation_heading' style='margin-top: 0.5em;'>Followers</h1><hr></center>
        <div class="ui grid">
        <div class="ui row"  id='profile_list_margins'>
          {% if followers_profiles %}
          <div class="ui four cards">
            {% for obj in  followers_profiles %}
              


              <a href="{% url 'profiles:profile-detail-view' obj.user.username %}">
                <div id='card1'class="card">
                  <div class="ui small image ">
                    <img src="{{obj.picture.url}}">
                  </div>
                  <div class="content">
                    <span class="header">
                      {{obj.user.full_name|truncatechars:20}}
                      {% if obj.is_org_verified %}<a data-tooltip="Verified {{obj.type_of_verified_org}}" data-position="bottom center"> <i class="check circle icon" style="color: green;"></i></a>{% endif %}
                    </span>
                    <div class="meta">
                      <a href="{% url 'profiles:profile-detail-view' obj.user.username %}">
                        {% if obj.cat == 'Organization' %}
                        <span data-tooltip="Organization" data-position="bottom left">
                        <i class="fa-solid fa-at" style="color: blue; margin:0px;"></i></span>
                        {% elif obj.cat == 'Brand' %}
                        <span data-tooltip="Brand" data-position="bottom left">
                        <i class="fa-solid fa-at" style="color: orange; margin:0px;"></i></span>
                        {% elif obj.cat == 'Channel' %}
                        <span data-tooltip="Channel" data-position="bottom left">
                        <i class="fa-solid fa-at" style="color: red; margin:0px;"></i></span>
                        {% elif obj.cat == 'Masjid & Madrasa' %}
                        <span data-tooltip="Masjid & Madrasa" data-position="bottom left">
                        <i class="fa-solid fa-at" style="color: green; margin:0px;"></i></span>
                        {% else %}
                        <span data-tooltip="General" data-position="bottom left">
                        <i class="fa-solid fa-at" style="color: black; margin:0px;"></i></span>
                        {% endif %}{{obj.user.username|truncatechars:20}}</a>
                    </div>
                    <i class="user icon"></i>
                      {{obj.get_followers|length}} Followers
                  </div>

                  {% with profile=obj %}
                    {% include 'main/follow_unfollow.html' %}
                  {% endwith %} 
                </div>
                <div class="content">
                  <div class="header">{{obj.user.full_name|truncatechars:20}}</div>
                  <div class="meta">
                    <a href="{% url 'profiles:profile-detail-view' obj.user.username %}">@{{obj.user.username|truncatechars:20}}</a>
                  </div>
                  <i class="user icon"></i>
                    {{obj.get_followers|length}} Followers
                </div>

                {% with profile=obj %}
                  {% include 'main/follow_unfollow.html' %}
                {% endwith %} 
              </div>
            </a>
        
          {% endfor %}
          </div>
          {% else %}
            <center><div class="ui green message" style='width:90%; margin-bottom:1em; margin-right:12em;'><b>You don't have any Followers</b></div></center>
          {% endif %}
          
        </div>

        


      </div>
      </div>
    </div>
  </div>
</div>



{% endblock content %}


{% comment %} 

<div class='ui segment'>
      <div class="ui grid">
        <div class="row">
          <div class="three wide column">
            <img class="ui small circular image" src="{{ obj.picture.url }}">
          </div>
          <div class="thirteen wide column">
            <h3>{{ obj.user.username }}</h3>
            <p>{{ obj.bio }}</p>
            <a href=" {% url 'profiles:profile-detail-view' obj.pk %} ">
              <button class='ui primary button sizebtn mb-5'>See Profile</button>
            </a>
            <br>
          
            {% if obj.user not in rel_receiver and obj.user not in rel_sender%}
            <form action="{% url 'profiles:send-invite' %}" method='POST'>
              {% csrf_token %}
              <input type="hidden" name='profile_pk' value={{obj.pk}}>
                <button type='submit' class='ui positive basic button sizebtn mb-5'><i class='plus square icon'></i>Add to Friends</button>
            </form>
            {% endif %}
            
            {% if obj.user in rel_receiver and request.user not in obj.friends.all %}
              <button class='ui disabled button'>
                <i class='user icon sizebtn mb-5'></i>
                Pending...
              </button>
            {% endif %}

            <!--to remove from firend list-->
            {% if request.user in obj.friends.all %}
            <form action="{% url 'profiles:remove-friend' %}" method='POST'>
              {% csrf_token %}
              <input type="hidden" name='profile_pk' value={{obj.pk}}>
              
              <button class='ui negative basic button'>
                <i class='minus square icon sizebtn mb-5'></i>
                Remove from Friends
              </button>
            </form>
            {% endif %}

          </div>
        </div>
      </div>
    </div>

{% endcomment %}








